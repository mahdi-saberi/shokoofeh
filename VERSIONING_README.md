# Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø³ÛŒØ³ØªÙ… ÙˆØ±Ú˜Ù†â€ŒØ¨Ù†Ø¯ÛŒ

## ğŸ¯ Ù‡Ø¯Ù
Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ… Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª ÙˆØ±Ú˜Ù†â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù image Ù‡Ø§ Ùˆ tracking ØªØºÛŒÛŒØ±Ø§Øª Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª.

## ğŸ“‹ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ ÙˆØ±Ú˜Ù†â€ŒØ¨Ù†Ø¯ÛŒ

### ğŸš€ Laravel App
- **ÙˆØ±Ú˜Ù† Ø¬Ø¯ÛŒØ¯**: Ù‡Ø± Ø¨Ø§Ø± buildØŒ ÙˆØ±Ú˜Ù† Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ ÙØ±Ù…Øª `YYYY.MM.DD-HHMM` Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯
- **Latest**: Ù‡Ù…ÛŒØ´Ù‡ Ø¢Ø®Ø±ÛŒÙ† ÙˆØ±Ú˜Ù† build Ø´Ø¯Ù‡
- **Ù…Ø«Ø§Ù„**: `2025.01.28-1430`, `2025.01.28-1500`

### ğŸŒ Nginx
- **ÙˆØ±Ú˜Ù† Ø¯Ù‚ÛŒÙ‚**: `1.29.1-alpine` (ÙˆØ±Ú˜Ù† Ù¾Ø§ÛŒØ¯Ø§Ø±)
- **Stable**: tag Ø´Ø¯Ù‡ Ø§Ø² ÙˆØ±Ú˜Ù† Ø¯Ù‚ÛŒÙ‚ Ø¨Ø±Ø§ÛŒ production
- **ØªØºÛŒÛŒØ±Ø§Øª**: ÙÙ‚Ø· Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø² Ø¨Ù‡ upgrade Ø§Ù…Ù†ÛŒØªÛŒ

### ğŸ—„ï¸ MySQL
- **ÙˆØ±Ú˜Ù† Ø«Ø§Ø¨Øª**: `8.0` (ÙˆØ±Ú˜Ù† Ù¾Ø§ÛŒØ¯Ø§Ø±)
- **ØªØºÛŒÛŒØ±Ø§Øª**: ÙÙ‚Ø· Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø² Ø¨Ù‡ upgrade Ø§Ù…Ù†ÛŒØªÛŒ

## ğŸ”§ Ù†Ø­ÙˆÙ‡ Ø§Ø³ØªÙØ§Ø¯Ù‡

### Û±. Build Ùˆ Push
```bash
# Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª build Ùˆ push
./build-and-push.sh
```

**Ø®Ø±ÙˆØ¬ÛŒ:**
- `laravel-app:2025.01.28-1430` (ÙˆØ±Ú˜Ù† Ø¬Ø¯ÛŒØ¯)
- `laravel-app:latest` (Ø¢Ø®Ø±ÛŒÙ† ÙˆØ±Ú˜Ù†)
- `nginx:1.29.1-alpine` (ÙˆØ±Ú˜Ù† Ø¯Ù‚ÛŒÙ‚)
- `nginx:stable` (ÙˆØ±Ú˜Ù† Ù¾Ø§ÛŒØ¯Ø§Ø±)
- `mysql:8.0` (ÙˆØ±Ú˜Ù† Ø«Ø§Ø¨Øª)

### Û². Ù…Ø¯ÛŒØ±ÛŒØª ÙˆØ±Ú˜Ù†â€ŒÙ‡Ø§
```bash
# Ù†Ù…Ø§ÛŒØ´ ÙˆØ±Ú˜Ù†â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯
./version-manager.sh
```

**Ø®Ø±ÙˆØ¬ÛŒ:**
- Ù„ÛŒØ³Øª ÙˆØ±Ú˜Ù†â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯
- Ø¢Ø®Ø±ÛŒÙ† ÙˆØ±Ú˜Ù† app
- ÙØ§ÛŒÙ„ `k8s-versions.env` Ø¨Ø±Ø§ÛŒ Kubernetes

### Û³. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± Kubernetes

#### Ø¨Ø±Ø§ÛŒ Development
```yaml
image: registry.hamdocker.ir/mahdi-saberi/laravel-app:latest
image: registry.hamdocker.ir/mahdi-saberi/nginx:1.29.1-alpine
image: registry.hamdocker.ir/mahdi-saberi/mysql:8.0
```

#### Ø¨Ø±Ø§ÛŒ Production
```yaml
image: registry.hamdocker.ir/mahdi-saberi/laravel-app:2025.01.28-1430
image: registry.hamdocker.ir/mahdi-saberi/nginx:1.29.1-alpine
image: registry.hamdocker.ir/mahdi-saberi/mysql:8.0
```

## ğŸ“Š Ù…Ø²Ø§ÛŒØ§ÛŒ Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ…

### âœ… **Tracking ØªØºÛŒÛŒØ±Ø§Øª**
- Ù‡Ø± deployment ØªØ§Ø±ÛŒØ® Ø¯Ù‚ÛŒÙ‚ Ø¯Ø§Ø±Ø¯
- Ø§Ù…Ú©Ø§Ù† rollback Ø¨Ù‡ ÙˆØ±Ú˜Ù† Ù‚Ø¨Ù„ÛŒ
- ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ú©Ø§Ù…Ù„ ØªØºÛŒÛŒØ±Ø§Øª

### âœ… **Ù¾Ø§ÛŒØ¯Ø§Ø±ÛŒ**
- nginx Ùˆ mysql ÙˆØ±Ú˜Ù†â€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒØ¯Ø§Ø± Ø¯Ø§Ø±Ù†Ø¯
- Ú©Ø§Ù‡Ø´ Ø±ÛŒØ³Ú© ØªØºÛŒÛŒØ±Ø§Øª Ù†Ø§Ø®ÙˆØ§Ø³ØªÙ‡
- Ø§Ù…Ù†ÛŒØª Ø¨ÛŒØ´ØªØ±

### âœ… **Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±ÛŒ**
- Ø§Ù…Ú©Ø§Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÙˆØ±Ú˜Ù† Ø®Ø§Øµ ÛŒØ§ latest
- Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ development Ùˆ production
- Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ø³Ø§Ù† ÙˆØ±Ú˜Ù†â€ŒÙ‡Ø§

## ğŸš¨ Ù†Ú©Ø§Øª Ù…Ù‡Ù…

### âš ï¸ **Ø¨Ø±Ø§ÛŒ Production**
- Ø§Ø² ÙˆØ±Ú˜Ù†â€ŒÙ‡Ø§ÛŒ Ø¯Ù‚ÛŒÙ‚ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
- Ù‚Ø¨Ù„ Ø§Ø² deployment ØªØ³Øª Ú©Ù†ÛŒØ¯
- backup Ø§Ø² ÙˆØ±Ú˜Ù† Ù‚Ø¨Ù„ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯

### âš ï¸ **Ø¨Ø±Ø§ÛŒ Development**
- Ø§Ø² latest Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
- ØªØºÛŒÛŒØ±Ø§Øª Ø±Ø§ track Ú©Ù†ÛŒØ¯
- ÙˆØ±Ú˜Ù†â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†ÛŒØ¯

### âš ï¸ **Maintenance**
- ÙˆØ±Ú˜Ù†â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯
- ÙØ¶Ø§ÛŒ storage Ø±Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù†ÛŒØ¯
- Ø§Ù…Ù†ÛŒØª ÙˆØ±Ú˜Ù†â€ŒÙ‡Ø§ Ø±Ø§ Ú†Ú© Ú©Ù†ÛŒØ¯

## ğŸ”„ Workflow Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ

### Û±. **Development**
```bash
# ØªØºÛŒÛŒØ±Ø§Øª Ø¯Ø± Ú©Ø¯
git commit -m "feature: add new functionality"

# Build Ùˆ push
./build-and-push.sh

# Deploy Ø¯Ø± development
kubectl apply -f k8s-deployment.yaml
```

### Û². **Production**
```bash
# Ø§Ù†ØªØ®Ø§Ø¨ ÙˆØ±Ú˜Ù† Ù…Ù†Ø§Ø³Ø¨
./version-manager.sh

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ±Ú˜Ù†â€ŒÙ‡Ø§
cat k8s-versions.env

# Deploy Ø¯Ø± production Ø¨Ø§ ÙˆØ±Ú˜Ù† Ø¯Ù‚ÛŒÙ‚
kubectl apply -f k8s-statefulset.yaml
```

## ğŸ“ˆ Monitoring Ùˆ Analytics

### ğŸ“Š **Metrics Ù…Ù‡Ù…**
- ØªØ¹Ø¯Ø§Ø¯ ÙˆØ±Ú˜Ù†â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯
- Ø­Ø¬Ù… storage Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡
- ØªØ§Ø±ÛŒØ® Ø¢Ø®Ø±ÛŒÙ† deployment
- ÙˆØ¶Ø¹ÛŒØª health check Ù‡Ø§

### ğŸ“Š **Alerts**
- ÙˆØ±Ú˜Ù†â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ (Ø¨ÛŒØ´ Ø§Ø² 30 Ø±ÙˆØ²)
- Ø®Ø·Ø§Ù‡Ø§ÛŒ deployment
- Ù…Ø´Ú©Ù„Ø§Øª Ø§Ù…Ù†ÛŒØªÛŒ
- ÙØ¶Ø§ÛŒ storage Ú©Ù…

## ğŸ› ï¸ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©Ù…Ú©ÛŒ

### ğŸ“ **Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯**
- `build-and-push.sh` - Build Ùˆ push image Ù‡Ø§
- `version-manager.sh` - Ù…Ø¯ÛŒØ±ÛŒØª ÙˆØ±Ú˜Ù†â€ŒÙ‡Ø§
- `pull-images.sh` - Pull Ú©Ø±Ø¯Ù† image Ù‡Ø§

### ğŸ“ **ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Kubernetes**
- `k8s-deployment.yaml` - Development deployment
- `k8s-statefulset.yaml` - Production deployment
- `k8s-source-copy-job.yaml` - Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† source files

## ğŸ‰ Ù†ØªÛŒØ¬Ù‡â€ŒÚ¯ÛŒØ±ÛŒ

Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ… ÙˆØ±Ú˜Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ù‡ Ø´Ù…Ø§ Ø§Ù…Ú©Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯:
- **Tracking Ú©Ø§Ù…Ù„ ØªØºÛŒÛŒØ±Ø§Øª** Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯
- **Rollback Ø¢Ø³Ø§Ù†** Ø¨Ù‡ ÙˆØ±Ú˜Ù†â€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ
- **Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ù‡ØªØ± production** Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯
- **Ø§Ù…Ù†ÛŒØª Ø¨ÛŒØ´ØªØ±** Ø¯Ø± deployment Ù‡Ø§
- **ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ú©Ø§Ù…Ù„** Ø§Ø² ØªØºÛŒÛŒØ±Ø§Øª Ù¾Ø±ÙˆÚ˜Ù‡ 